<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeTools | Private & Secure</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõ°Ô∏è</text></svg>">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    
    <style>
        /* --- GLOBAL STYLES --- */
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        /* HEADER */
        header { text-align: center; margin-bottom: 20px; color: white; text-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        h1 { margin: 0; font-size: 2.5rem; letter-spacing: -1px; }
        .subtitle { font-size: 1.1rem; opacity: 0.9; margin-top: 5px; font-weight: 300; }

        /* PRIVACY BANNER */
        .privacy-banner {
            background-color: rgba(255, 255, 255, 0.9);
            color: #2d3436;
            padding: 12px 20px;
            border-radius: 12px;
            font-size: 0.9rem;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 10px;
            max-width: 500px;
            width: 100%;
            box-sizing: border-box;
            backdrop-filter: blur(5px);
        }

        /* TABS */
        .tab-bar {
            display: flex;
            background: rgba(255, 255, 255, 0.2);
            padding: 5px;
            border-radius: 50px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
        }
        .tab-btn {
            background: transparent; border: none; padding: 10px 25px;
            border-radius: 40px; cursor: pointer; font-weight: 600;
            color: white; transition: all 0.3s ease; font-size: 0.95rem;
        }
        .tab-btn:hover { background: rgba(255,255,255,0.1); }
        .tab-btn.active {
            background-color: white; color: #764ba2;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        /* TOOL CARDS */
        .tool-content {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            padding: 2.5rem; border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            max-width: 500px; width: 100%;
            animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            box-sizing: border-box;
        }
        .tool-content.active-tool { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        h2 { color: #4a4a4a; border-bottom: 2px solid #f0f0f0; padding-bottom: 15px; margin-top: 0; display:flex; align-items:center; gap:10px; }
        
        /* INPUTS & BUTTONS */
        label { font-weight: 600; font-size: 0.9rem; color: #666; display: block; margin-top: 15px; }
        input, select {
            width: 100%; padding: 14px; margin: 8px 0;
            border: 2px solid #eee; border-radius: 10px;
            box-sizing: border-box; font-size: 1rem;
            transition: border 0.2s; background: #f9f9f9;
        }
        input:focus, select:focus { border-color: #764ba2; outline: none; background: white; }
        
        button.action-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white; border: none; padding: 15px;
            border-radius: 10px; cursor: pointer; font-size: 1rem;
            width: 100%; font-weight: 700; margin-top: 20px;
            transition: transform 0.2s;
        }
        button.action-btn:hover { transform: translateY(-2px); }

        /* TOGGLE SWITCHES */
        .mode-toggle { display: flex; gap: 10px; margin-bottom: 15px; }
        .mode-btn { flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 8px; background: white; cursor: pointer; font-size: 0.9rem; }
        .mode-btn.active-mode { background: #e9ecef; border-color: #764ba2; color: #764ba2; font-weight: bold; }

        /* SPECIFIC COMPONENTS */
        .warning-box {
            background-color: #fff8e1; color: #b7791f; padding: 12px;
            border-radius: 8px; font-size: 0.85rem; margin-top: 20px;
            border-left: 4px solid #f6e05e; line-height: 1.4;
        }
        .password-display {
            background: #2d3436; color: #00ff9d; font-family: monospace;
            padding: 20px; border-radius: 10px; text-align: center;
            font-size: 1.3rem; margin: 15px 0; word-break: break-all;
        }

        /* --- COMPLIANCE WALL (TERMS & COOKIES) --- */
        .compliance-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 9999;
            backdrop-filter: blur(8px);
            display: flex; align-items: center; justify-content: center;
        }
        .compliance-card {
            background: white; width: 90%; max-width: 500px;
            padding: 30px; border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            text-align: left;
        }
        .terms-scroll {
            height: 150px; overflow-y: auto; background: #f8f9fa;
            border: 1px solid #ddd; padding: 10px; margin: 15px 0;
            font-size: 0.8rem; color: #555; border-radius: 8px;
        }
        .compliance-btn {
            background: #28a745; color: white; border: none; padding: 15px;
            border-radius: 8px; width: 100%; font-size: 1rem; font-weight: bold;
            cursor: pointer; transition: background 0.2s;
        }
        .compliance-btn:hover { background: #218838; }

        /* --- SAFETY MODAL --- */
        .modal {
            display: none; position: fixed; z-index: 1000; left: 0; top: 0;
            width: 100%; height: 100%; background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            align-items: center; justify-content: center;
        }
        .modal-content {
            background: white; padding: 25px; border-radius: 15px;
            width: 90%; max-width: 400px; text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            animation: popIn 0.3s ease;
        }
        @keyframes popIn { from {transform: scale(0.8); opacity:0;} to {transform: scale(1); opacity:1;} }
        .modal-buttons { display: flex; gap: 10px; margin-top: 20px; }
        .btn-cancel { background: #eee; color: #333; flex: 1; border:none; padding:12px; border-radius:8px; cursor:pointer; font-weight:600; }
        .btn-confirm { background: #dc3545; color: white; flex: 1; border:none; padding:12px; border-radius:8px; cursor:pointer; font-weight:600; }

        /* BLOCKED QR EFFECT */
        .blocked-qr {
            width: 128px; height: 128px;
            background: linear-gradient(135deg, #00c6ff, #0072ff);
            border-radius: 10px; display: flex; align-items: center; justify-content: center;
            color: white; font-size: 2rem; position: relative; overflow: hidden;
            box-shadow: 0 0 20px rgba(0, 114, 255, 0.5);
        }
        .blocked-qr::after {
            content: ""; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0) 100%);
            transform: rotate(30deg); animation: shine 2.5s infinite;
        }
        @keyframes shine { 0% {left: -50%;} 100% {left: 150%;} }

        /* ADS & FOOTER */
        .ad-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; max-width: 500px; margin-top: 30px; }
        .ad-card {
            background: linear-gradient(45deg, #ff9a9e, #fad0c4, #fbc2eb, #a18cd1);
            background-size: 400% 400%; animation: gradientBG 5s ease infinite;
            border-radius: 15px; padding: 20px; text-decoration: none;
            color: white; position: relative; overflow: hidden;
            transition: transform 0.3s; box-shadow: 0 4px 15px rgba(0,0,0,0.2); text-align: center;
        }
        .ad-card:hover { transform: scale(1.03); }
        .ad-card.secondary { background: linear-gradient(45deg, #4facfe, #00f2fe); background-size: 400% 400%; }
        .ad-badge { position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.2); padding: 2px 6px; border-radius: 4px; font-size: 0.6rem; text-transform: uppercase; }
        .ad-title { font-weight: 800; font-size: 1.2rem; display: block; margin-bottom: 5px; }
        .ad-desc { font-size: 0.8rem; opacity: 0.9; }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        .legal-footer { margin-top: auto; padding-top: 40px; text-align: center; font-size: 0.8rem; color: rgba(255,255,255,0.8); max-width: 500px; line-height: 1.6; }
        
        .history-container { margin-top: 30px; width: 100%; max-width: 500px; background: rgba(255,255,255,0.9); padding: 20px; border-radius: 15px; box-sizing: border-box; }
        .history-item { border-bottom: 1px solid #eee; padding: 12px 0; font-size: 0.9rem; display: flex; justify-content: space-between; }
        .timestamp { background: #eee; padding: 2px 8px; border-radius: 12px; font-size: 0.75rem; color: #666; }
    </style>
</head>
<body>

    <div id="complianceWall" class="compliance-overlay" style="display:flex;">
        <div class="compliance-card">
            <h2 style="border:none; margin-bottom: 5px;">üç™ Terms & Privacy</h2>
            <p style="margin-top:0; color:#666;">Before you can use <strong>SafeTools</strong>, you must accept our terms of service and data policy.</p>
            
            <div class="terms-scroll">
                <strong>1. Acceptance of Terms</strong><br>
                By using SafeTools, you agree to be bound by these terms. If you do not agree, please close this page.<br><br>
                <strong>2. Limitation of Liability</strong><br>
                SafeTools and its creator, Fhabian Feliciano, are not liable for any damages, data loss, or legal issues arising from the use of these tools. You use this software entirely at your own risk.<br><br>
                <strong>3. User Responsibility</strong><br>
                You agree not to use the QR or Password tools for illegal purposes, malware distribution, or hacking. You are solely responsible for the content you process.<br><br>
                <strong>4. Local Data & Cookies</strong><br>
                We use browser "Local Storage" (similar to cookies) to save your history and preferences on your device. We do not track you across the web or sell your data.
            </div>

            <div style="display:flex; align-items:center; gap:10px; margin-bottom:20px;">
                <input type="checkbox" id="termsCheck" style="width:20px; height:20px; margin:0;">
                <label for="termsCheck" style="margin:0; font-weight:400; font-size:0.9rem;">I have read and agree to the Terms.</label>
            </div>

            <button class="compliance-btn" onclick="acceptTerms()">Accept & Continue</button>
        </div>
    </div>

    <header>
        <h1>SafeTools</h1>
        <div class="subtitle">Private ‚Ä¢ Secure ‚Ä¢ Free</div>
    </header>

    <div class="privacy-banner">
        <span style="font-size: 1.5rem;">üîí</span>
        <div>
            <strong>Your Privacy Guaranteed</strong><br>
            Files are processed 100% locally on your device.
        </div>
    </div>

    <div class="tab-bar">
        <button class="tab-btn active" onclick="openTab('tab-converter')">Converter</button>
        <button class="tab-btn" onclick="openTab('tab-qr')">QR Code</button>
        <button class="tab-btn" onclick="openTab('tab-password')">Password</button>
    </div>

    <div id="tab-converter" class="tool-content active-tool">
        <h2>üñºÔ∏è Image Converter</h2>
        <p style="color:#666;">Transform images without uploading them.</p>
        <label>1. Select Image</label>
        <input type="file" id="fileInput" accept="image/*">
        <label>2. Output Format</label>
        <select id="formatSelect">
            <option value="image/jpeg">JPG</option>
            <option value="image/png">PNG</option>
            <option value="image/webp">WebP</option>
            <option value="image/bmp">BMP</option>
        </select>
        <canvas id="canvas" style="display:none;"></canvas>
        <button id="convertBtn" class="action-btn" style="display:none;">Convert & Download</button>
        <div class="warning-box">
            <strong>‚ö†Ô∏è Legal Disclaimer:</strong> Please only convert files you own.
        </div>
    </div>

    <div id="tab-qr" class="tool-content">
        <h2>üîó Smart QR Code</h2>
        <div class="mode-toggle">
            <button class="mode-btn active-mode" onclick="setQRMode('link', this)">Link / Text</button>
            <button class="mode-btn" onclick="setQRMode('wifi', this)">WiFi Login</button>
        </div>
        <div id="qr-input-link">
            <input type="text" id="linkInput" placeholder="Paste link here (e.g. https://google.com)">
        </div>
        <div id="qr-input-wifi" style="display:none;">
            <input type="text" id="wifiName" placeholder="WiFi Network Name (SSID)">
            <input type="text" id="wifiPass" placeholder="WiFi Password">
        </div>
        <button class="action-btn" onclick="attemptQR()">Generate QR Code</button>
        <div id="qrcode" style="margin-top:25px; display:flex; justify-content:center; padding: 20px; background:white; border-radius:10px; min-height:168px; align-items:center;"></div>
    </div>

    <div id="tab-password" class="tool-content">
        <h2>üîê Secure Password</h2>
        <div class="mode-toggle">
            <button class="mode-btn active-mode" onclick="setPassMode('random', this)">Random</button>
            <button class="mode-btn" onclick="setPassMode('memorable', this)">Memorable</button>
        </div>
        <div id="pass-input-memorable" style="display:none;">
            <p style="font-size:0.9rem; color:#666;">Enter a word you can remember:</p>
            <input type="text" id="baseWord" placeholder="Type a word (e.g. Pizza)">
        </div>
        <div id="passwordResult" class="password-display">Click Generate</div>
        <button class="action-btn" onclick="generatePassword()">Generate Password</button>
        <button class="action-btn" onclick="copyPassword()" style="background: #aab7b8; margin-top:10px; color:#2d3436;">Copy to Clipboard</button>
    </div>

    <div class="history-container">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
            <h3 style="margin:0; color:#333;">History</h3>
            <button onclick="clearHistory()" style="background:none; border:none; color:#e74c3c; cursor:pointer;">Clear All</button>
        </div>
        <div id="historyList"></div>
    </div>

    <div class="ad-grid">
        <a href="https://gemini.google.com" target="_blank" class="ad-card">
            <span class="ad-badge">Co-Pilot</span>
            <span class="ad-title">Gemini AI ‚ú®</span>
            <span class="ad-desc">The AI that helped build this site.</span>
        </a>
        <a href="YOUR_CHANNEL_LINK_HERE" target="_blank" class="ad-card secondary">
            <span class="ad-badge">Creator</span>
            <span class="ad-title">Fhabian's Channel üì∫</span>
            <span class="ad-desc">Check out my videos & content!</span>
        </a>
    </div>

    <div class="legal-footer">
        <p>Built by <strong>Fhabian Feliciano</strong> ‚Ä¢ Co-piloted by Google Gemini</p>
        <p style="opacity: 0.7;"><strong>Disclaimer:</strong> SafeTools is a client-side utility.</p>
        <p>&copy; 2024 SafeTools. All rights reserved.</p>
    </div>

    <div id="safetyModal" class="modal">
        <div class="modal-content">
            <div style="font-size: 3rem; margin-bottom: 10px;">üõ°Ô∏è</div>
            <h3 style="margin:0 0 10px 0; color:#dc3545;">Safety Check</h3>
            <p style="color:#555; font-size:0.9rem; line-height:1.5;">
                <strong>Warning:</strong> Do not use this tool to facilitate malicious networks, spread malware, or harm others. 
                <br><br>
                By clicking continue, you agree to use this tool responsibly.
            </p>
            <div class="modal-buttons">
                <button class="btn-cancel" onclick="cancelWifiGen()">Cancel</button>
                <button class="btn-confirm" onclick="confirmWifiGen()">I Agree, Continue</button>
            </div>
        </div>
    </div>

    <script>
        // GLOBALS
        let currentQRMode = 'link';
        let currentPassMode = 'random';

        // --- COMPLIANCE LOGIC ---
        function checkCompliance() {
            // Check if user has already accepted
            if (localStorage.getItem('fhabian_terms_accepted') === 'true') {
                document.getElementById('complianceWall').style.display = 'none';
            } else {
                document.getElementById('complianceWall').style.display = 'flex';
            }
        }
        
        function acceptTerms() {
            const checkbox = document.getElementById('termsCheck');
            if (!checkbox.checked) {
                alert("Please check the box to agree to the terms.");
                return;
            }
            // Save acceptance to Local Storage
            localStorage.setItem('fhabian_terms_accepted', 'true');
            // Hide the wall
            document.getElementById('complianceWall').style.display = 'none';
        }

        // Run compliance check immediately on load
        window.onload = function() {
            checkCompliance();
            renderHistory();
        };

        // --- EXISTING LOGIC BELOW ---

        function openTab(tabId) {
            const contents = document.getElementsByClassName('tool-content');
            for (let i = 0; i < contents.length; i++) contents[i].classList.remove('active-tool');
            const buttons = document.getElementsByClassName('tab-btn');
            for (let i = 0; i < buttons.length; i++) buttons[i].classList.remove('active');
            document.getElementById(tabId).classList.add('active-tool');
            event.currentTarget.classList.add('active');
        }

        // HISTORY
        function addToHistory(action, detail) {
            const history = JSON.parse(localStorage.getItem('safeToolsHistory')) || [];
            const timestamp = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            history.unshift({ action, detail, time: timestamp });
            if(history.length > 5) history.pop(); 
            localStorage.setItem('safeToolsHistory', JSON.stringify(history));
            renderHistory();
        }
        function renderHistory() {
            const list = document.getElementById('historyList');
            const history = JSON.parse(localStorage.getItem('safeToolsHistory')) || [];
            list.innerHTML = "";
            if (history.length === 0) { list.innerHTML = "<p style='color:#999; text-align:center;'>No recent activity</p>"; return; }
            history.forEach(item => {
                list.innerHTML += `<div class="history-item"><div><strong>${item.action}</strong> <span style="color:#666"> - ${item.detail}</span></div><div class="timestamp">${item.time}</div></div>`;
            });
        }
        function clearHistory() { if(confirm("Clear history?")) { localStorage.removeItem('safeToolsHistory'); renderHistory(); } }
        
        // CONVERTER
        const fileInput = document.getElementById('fileInput');
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const convertBtn = document.getElementById('convertBtn');
        const formatSelect = document.getElementById('formatSelect');
        fileInput.addEventListener('change', function(e) {
            if(e.target.files.length === 0) return;
            convertBtn.style.display = 'block'; convertBtn.innerText = "Convert & Download";
        });
        convertBtn.addEventListener('click', function() {
            const file = fileInput.files[0];
            if(!file) return;
            const img = new Image();
            img.onload = function() {
                canvas.width = img.width; canvas.height = img.height;
                ctx.fillStyle = "#FFFFFF"; ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.drawImage(img, 0, 0);
                const selectedFormat = formatSelect.value;
                const newUrl = canvas.toDataURL(selectedFormat, 0.9);
                const link = document.createElement('a');
                let ext = ".jpg";
                if (selectedFormat === "image/png") ext = ".png"; if (selectedFormat === "image/webp") ext = ".webp"; if (selectedFormat === "image/bmp") ext = ".bmp";
                link.download = 'converted-image' + ext;
                link.href = newUrl; link.click();
                addToHistory("Converted Image", `To ${ext.toUpperCase()}`);
            }
            img.src = URL.createObjectURL(file);
        });

        // QR CODE
        function setQRMode(mode, btn) {
            currentQRMode = mode;
            const btns = btn.parentElement.getElementsByClassName('mode-btn');
            for(let b of btns) b.classList.remove('active-mode');
            btn.classList.add('active-mode');
            document.getElementById('qr-input-link').style.display = (mode === 'link') ? 'block' : 'none';
            document.getElementById('qr-input-wifi').style.display = (mode === 'wifi') ? 'block' : 'none';
        }

        function attemptQR() {
            if (currentQRMode === 'wifi') {
                const ssid = document.getElementById("wifiName").value;
                if(!ssid) { alert("Please enter Network Name"); return; }
                document.getElementById('safetyModal').style.display = 'flex';
            } else {
                generateQR();
            }
        }

        function confirmWifiGen() {
            document.getElementById('safetyModal').style.display = 'none';
            generateQR();
        }

        function cancelWifiGen() {
            document.getElementById('safetyModal').style.display = 'none';
            const container = document.getElementById("qrcode");
            container.innerHTML = "<div class='blocked-qr'>üîí</div>";
        }

        function generateQR() {
            const container = document.getElementById("qrcode");
            let qrText = "";
            let historyText = "";
            if (currentQRMode === 'link') {
                qrText = document.getElementById("linkInput").value;
                historyText = "Link QR";
            } else {
                const ssid = document.getElementById("wifiName").value;
                const pass = document.getElementById("wifiPass").value;
                qrText = `WIFI:T:WPA;S:${ssid};P:${pass};;`;
                historyText = "WiFi QR";
            }
            if(qrText === "") return;
            container.innerHTML = ""; 
            new QRCode(container, { text: qrText, width: 128, height: 128 });
            addToHistory("QR Created", historyText);
        }

        // PASSWORD
        function setPassMode(mode, btn) {
            currentPassMode = mode;
            const btns = btn.parentElement.getElementsByClassName('mode-btn');
            for(let b of btns) b.classList.remove('active-mode');
            btn.classList.add('active-mode');
            document.getElementById('pass-input-memorable').style.display = (mode === 'memorable') ? 'block' : 'none';
        }
        function generatePassword() {
            let password = "";
            const chars = "ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789!@#$%^&*";
            if (currentPassMode === 'memorable') {
                const base = document.getElementById('baseWord').value.trim();
                if (!base) { alert("Please type a word first!"); return; }
                let cleanBase = base.charAt(0).toUpperCase() + base.slice(1).toLowerCase();
                cleanBase = cleanBase.replace(/a/g, "4").replace(/e/g, "3").replace(/i/g, "1").replace(/o/g, "0").replace(/s/g, "$");
                const randomNum = Math.floor(Math.random() * 99) + 10;
                password = cleanBase + "#" + randomNum;
            } else {
                for (let i = 0; i < 16; i++) {
                    const randomValues = new Uint32Array(1);
                    window.crypto.getRandomValues(randomValues);
                    password += chars[randomValues[0] % chars.length];
                }
            }
            document.getElementById("passwordResult").innerText = password;
            addToHistory("Password", currentPassMode === 'memorable' ? "Memorable" : "Random");
        }
        function copyPassword() {
            const text = document.getElementById("passwordResult").innerText;
            if (text.includes("Click Generate")) return;
            navigator.clipboard.writeText(text);
            alert("Copied!");
        }
    </script>
</body>
</html>
